[TRAIN] keras.Model.fit patched: epochsâ‰¥500, EarlyStopping(patience=25), ReduceLROnPlateau(patience=7), cosine=true
[ENV] {"type": "env", "ts": "2025-11-22T15:40:27+00:00", "python": "3.13.7", "platform": {"system": "Darwin", "release": "25.1.0", "machine": "arm64"}, "versions": {"numpy": "2.3.5", "pandas": "2.3.3", "scikit_learn": "1.7.2", "scipy": "1.16.3", "tensorflow": "2.20.0", "keras": "3.12.0", "xgboost": "3.1.1", "hmmlearn": "0.3.3"}}
Loaded 749 historical draws.
[REGIME] GMM fitted on 749 draws into 3 regimes.
[TRAIN] keras.Model.compile patched: {"set_loss": true, "rank_w": 0.15, "reward_w": 0.15, "tau": 0.05, "pair_neg": 20, "add_metrics": true}
[REGIME] Current regime: 1
Traceback (most recent call last):
  File "/Users/coleoehlrich/Colorado_Lotto/Lotto+.py", line 4082, in <module>
    features = compute_stat_features(window_draws, idx - 1)  # (40, n_features)
  File "/Users/coleoehlrich/Colorado_Lotto/Lotto+.py", line 3629, in compute_stat_features
    for i in range(idx_offset - k + 1, idx_offset + 1):
                                ^
UnboundLocalError: cannot access local variable 'k' where it is not associated with a value
